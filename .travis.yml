language: cpp
compiler: gcc
dist: trusty
sudo: required

install:
  # Get the linter
  - wget http://allen-software.com/uncrustify.tar.gz
  - mkdir uncrustify
  - cd uncrustify
  - tar -xf ../uncrustify.tar.gz
  - mkdir build && cd build
  - cmake .. -CMAKE_INSTALL_PREFIX=/usr; exit 0
  - make -j$(nproc);
  - sudo make install
  - cd ../../ && rm -rf uncrustify

script:
  - make -j$(nproc)
  - test/lint/run-linter.bash
  - cd test/scanner
  - ./testall.sh
